\subsection{Extensible Templates}\label{subsec:templates}

Terence Parr has formalized and developed the StringTemplate \cite{st} language for code generation. CML extensible templates are implemented in StringTemplate. The CML compiler uses StringTemplate for two purposes:

\begin{itemize}
\item \emph{file names and directory structure:}
each type of target generated by the CML compiler requires a different directory structure.
The CML compiler expects each target type to define a template file named ``files.stg'' (also known as \emph{files template}),
which will contain the path of all files to be generated. The \emph{files template} may use information provided by the \emph{target specification} (introduced in subsection \ref{subsec:overview}) in order to determine the file/directory names. Figure X shows an example of a \emph{files template}.
\item \emph{file content generation:}
each file listed under the \emph{files template} will have a corresponding \emph{content template} that specifies how the file's content must be generated. The \emph{content template} will receive as input one root-level element of the CML model, which will provide information to generate the file's content. The type of model element received as input by the \emph{content template} depends on which function of the \emph{files template} has defined the file to be generated. Figure Y shows a typical \emph{content template}. 
\end{itemize}

For example, ...
